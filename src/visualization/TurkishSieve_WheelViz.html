<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>6n±1 Animation - 5, 7, 11 ,13,17,19 Wheels</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
</head>
<body>
<script>
let numbers = [];
let boxSize = 30; 
let wheelRadius5, wheelRadius7, wheelRadius11, wheelRadius13, wheelRadius17, wheelRadius19;
let angle5 = 0, angle7 = 0, angle11 = 0, angle13 = 0, angle17 = 0, angle19 = 0;
let rotating5 = false, rotating7 = false, rotating11 = false, rotating13 = false, rotating17 = false, rotating19 = false;
let speed = 4; 
let offset = 0;
const gap =20;

let startMoving = false;
let startTime;

// 5 wheel
const wheelUnits5 = 10;
const firstTick5 = 7;
const secondTick5 = 10;
const number5 = 5;

// 7 wheel
const wheelUnits7 = 14; 
const firstTick7 = 9;   
const secondTick7 = 14;
const number7 = 7; 

// 11 wheel
const wheelUnits11 = 22;
const firstTick11 = 15;
const secondTick11 = 22;
const number11 = 11;

// 13 wheel
const wheelUnits13 = 26;
const firstTick13 = 17;
const secondTick13 = 26;
const number13 = 13;

// 17 wheel
const wheelUnits17 = 34;
const firstTick17 = 23;
const secondTick17 = 34;
const number17 = 17;

// 19 wheel
const wheelUnits19 = 38;
const firstTick19 = 25;
const secondTick19 = 38;
const number19 = 19;

const tickLength = 20; 

let coloredBoxes5 = [];
let coloredBoxes7 = [];
let coloredBoxes11 = [];
let coloredBoxes13 = [];
let coloredBoxes17 = [];
let coloredBoxes19 = [];


function setup() {
  createCanvas(windowWidth, windowHeight);
  wheelRadius5 = (boxSize * wheelUnits5) / (2 * PI);
  wheelRadius7 = (boxSize * wheelUnits7) / (2 * PI);
  wheelRadius11 = (boxSize * wheelUnits11) / (2 * PI);
  wheelRadius13 = (boxSize * wheelUnits13) / (2 * PI);
  wheelRadius17 = (boxSize * wheelUnits17) / (2 * PI);
  wheelRadius19 = (boxSize * wheelUnits19) / (2 * PI);
  for (let n = 1; n <= 88; n++) {
    numbers.push(6*n - 1);
    if (n!=88) numbers.push(6*n + 1);
    coloredBoxes5.push(false);
    coloredBoxes7.push(false);
    coloredBoxes11.push(false);
    coloredBoxes13.push(false);
	coloredBoxes17.push(false);
	coloredBoxes19.push(false);
  }
  startTime = millis();
}

function draw() {
  background(30);
  drawTitle();
  drawBoxes();

  let wheel5X = width - wheelRadius5 - 65;
  let wheel7X = wheel5X - wheelRadius5 - wheelRadius7 - gap;
  let wheel11X = wheel7X - wheelRadius7 - wheelRadius11 - gap;
  let wheel13X = wheel11X - wheelRadius11 - wheelRadius13 - gap;
  let wheel17X = wheel13X - wheelRadius13 - wheelRadius17 - gap;
  let wheel19X = wheel17X - wheelRadius17 - wheelRadius19 - gap;

  drawWheel(wheel5X, wheelRadius5, wheelUnits5, firstTick5, secondTick5, number5,tickLength, rotating5, angle5, 
            (a)=>{angle5 += (speed/boxSize)*(TWO_PI/wheelUnits5);}, "blue");
  drawWheel(wheel7X, wheelRadius7, wheelUnits7, firstTick7, secondTick7,number7, tickLength, rotating7, angle7, 
            (a)=>{angle7 += (speed/boxSize)*(TWO_PI/wheelUnits7);}, "darkgreen");
  drawWheel(wheel11X, wheelRadius11, wheelUnits11, firstTick11, secondTick11,number11, tickLength, rotating11, angle11, 
            (a)=>{angle11 += (speed/boxSize)*(TWO_PI/wheelUnits11);}, "red");
  drawWheel(wheel13X, wheelRadius13, wheelUnits13, firstTick13, secondTick13,number13, tickLength, rotating13, angle13, 
            (a)=>{angle13 += (speed/boxSize)*(TWO_PI/wheelUnits13);}, "goldenrod");
  drawWheel(wheel17X, wheelRadius17, wheelUnits17, firstTick17, secondTick17,number17, tickLength, rotating17, angle17, 
            (a)=>{angle17 += (speed/boxSize)*(TWO_PI/wheelUnits17);}, "purple");
  drawWheel(wheel19X, wheelRadius19, wheelUnits19, firstTick19, secondTick19,number19, tickLength, rotating19, angle19, 
            (a)=>{angle19 += (speed/boxSize)*(TWO_PI/wheelUnits19);}, "brown");			
}

function drawWheel(baseX, radius, units, tick1, tick2,number, tickLen, rotating, angle, updateFunc, colorName){
  push();
  let wheelY = height - (boxSize*3) - 40 - radius; 
  translate(baseX, wheelY);

  let startAngle = PI/2; 
  if(rotating) updateFunc();
  rotate(startAngle + angle);

  noFill();
  stroke(255);
  strokeWeight(2);
  ellipse(0, 0, radius*2);

  strokeWeight(4);
  const tickPositions = [tick1, tick2];
  for(let i of tickPositions){
    let a = (i-1)*(TWO_PI/units);
    let x1 = cos(a)*radius;
    let y1 = sin(a)*radius;
    let x2 = cos(a)*(radius - tickLen);
    let y2 = sin(a)*(radius - tickLen);
    line(x1, y1, x2, y2);
  }

  push();
  rotate(-startAngle - angle);
  fill(colorName);
  noStroke();
  textAlign(CENTER, CENTER);
  textSize(12);
  textStyle(BOLD);
  text(`Units: 2x${number}=${units}`, 0, -10);
  text(`Ticks: ${tick1}, ${tick2}`, 0, 10);
  textSize(15);
  textStyle(BOLD);
  text(`Prime: ${number}`, 0, -radius-40);
  text(`Start Number: 5x${number}=${5*number}`, 0, -radius-20);
  pop();

  pop();
}

function drawBoxes(){
  let baseY = height - boxSize*3 - 40; 
    if(!startMoving){
    if(millis() - startTime > 2000){ 
      startMoving = true;
    }
  }

  if(startMoving){
    offset += speed;
  }

  let wheel5X = width - wheelRadius5 - 80;
  let wheel7X = wheel5X - wheelRadius5 - wheelRadius7 - gap;
  let wheel11X = wheel7X - wheelRadius7 - wheelRadius11 - gap;
  let wheel13X = wheel11X - wheelRadius11 - wheelRadius13 - gap;
  let wheel17X = wheel13X - wheelRadius13 - wheelRadius17 - gap;
  let wheel19X = wheel17X - wheelRadius17 - wheelRadius19 - gap;

  let labelW = boxSize*1.5;
  drawLabelBox(10, baseY, "Numbers", labelW);
  drawLabelBox(10, baseY + boxSize, "Index", labelW);
  drawLabelBox(10, baseY + boxSize*2, "Is prime?", labelW);

  for(let i=0; i<numbers.length; i++){
    let x = width - (offset - i*boxSize);
if(x + boxSize < 0){
  let isComposite5 = coloredBoxes5[i];
  let isComposite7 = coloredBoxes7[i];
  let isComposite11 = coloredBoxes11[i];
  let isComposite13 = coloredBoxes13[i];
  let isComposite17 = coloredBoxes17[i];
  let isComposite19 = coloredBoxes19[i];

  let isComposite = isComposite5 || isComposite7 || isComposite11 || isComposite13 || isComposite17 || isComposite19;

  if(isComposite){
    if(!notPrimes.includes(numbers[i])){
      notPrimes.push(numbers[i]);
    }
  } else {
    if(!primes.includes(numbers[i])){
      primes.push(numbers[i]);
    }
  }
  continue; 
}

    if(x < 10 + labelW) continue;
    if(x > width + boxSize) continue;

    if(!rotating5 && numbers[i] === 25 && x < wheel5X + boxSize && x > wheel5X - boxSize) rotating5 = true;
    if(numbers[i] >= 25 && numbers[i] % 5 === 0 &&
       x + boxSize/2 >= wheel5X - boxSize/2 && x + boxSize/2 <= wheel5X + boxSize/2) {
      coloredBoxes5[i] = true;
    }

    if(!rotating7 && numbers[i] === 35 && x < wheel7X + boxSize && x > wheel7X - boxSize) rotating7 = true;
    if(numbers[i] >= 35 && numbers[i] % 7 === 0 &&
       x + boxSize/2 >= wheel7X - boxSize/2 && x + boxSize/2 <= wheel7X + boxSize/2) {
      coloredBoxes7[i] = true;
    }

    if(!rotating11 && numbers[i] === 55 && x < wheel11X + boxSize && x > wheel11X - boxSize) rotating11 = true;
    if(numbers[i] >= 55 && numbers[i] % 11 === 0 &&
       x + boxSize/2 >= wheel11X - boxSize/2 && x + boxSize/2 <= wheel11X + boxSize/2) {
      coloredBoxes11[i] = true;
    }

    if(!rotating13 && numbers[i] === 65 && x < wheel13X + boxSize && x > wheel13X - boxSize) rotating13 = true;
    if(numbers[i] >= 65 && numbers[i] % 13 === 0 &&
       x + boxSize/2 >= wheel13X - boxSize/2 && x + boxSize/2 <= wheel13X + boxSize/2) {
      coloredBoxes13[i] = true;
    }
	
if (!rotating17 && numbers[i] === 85 && x < wheel17X + boxSize && x > wheel17X - boxSize) rotating17 = true;
if (numbers[i] >= 85 && numbers[i] % 17 === 0 &&
    x + boxSize/2 >= wheel17X - boxSize/2 && x + boxSize/2 <= wheel17X + boxSize/2) {
  coloredBoxes17[i] = true;
}

if (!rotating19 && numbers[i] === 95 && x < wheel19X + boxSize && x > wheel19X - boxSize) rotating19 = true;
if (numbers[i] >= 95 && numbers[i] % 19 === 0 &&
    x + boxSize/2 >= wheel19X - boxSize/2 && x + boxSize/2 <= wheel19X + boxSize/2) {
  coloredBoxes19[i] = true;
}

let fillColor = coloredBoxes5[i] ? color(0,0,255) :
                (coloredBoxes7[i] ? color(0,100,0) :
                (coloredBoxes11[i] ? color(255,0,0) :
                (coloredBoxes13[i] ? color(204,204,0) :
                (coloredBoxes17[i] ? color(128,0,128) : 
				(coloredBoxes19[i] ? color(139,69,19) : 255)))));
let textColor = (coloredBoxes5[i] || coloredBoxes7[i] || coloredBoxes11[i] || coloredBoxes13[i] || coloredBoxes17[i] || coloredBoxes19[i]) ? color(255) : color(0);

    fill(fillColor);
    stroke(0);
    rect(x, baseY, boxSize, boxSize);
    fill(textColor);
    noStroke();
    textAlign(CENTER, CENTER);
    textSize(boxSize/3);
    text(numbers[i], x + boxSize/2, baseY + boxSize/2);

    fill(255);
    stroke(0);
    rect(x, baseY + boxSize, boxSize, boxSize);
    fill(0);
    noStroke();
    text(i, x + boxSize/2, baseY + boxSize + boxSize/2);

    let isComposite = (coloredBoxes5[i] || coloredBoxes7[i] || coloredBoxes11[i] || coloredBoxes13[i] || coloredBoxes17[i] || coloredBoxes19[i]);

let indexFill, indexText;
if(isComposite){
  indexFill = color(100);  
  indexText = color(255);  
} else {
  indexFill = color(255);  
  indexText = color(0);    
}
fill(indexFill);
stroke(0);
rect(x, baseY + boxSize, boxSize, boxSize);
fill(indexText);
noStroke();
text(i, x + boxSize/2, baseY + boxSize + boxSize/2);


if(isComposite){
  fill(100); 
  stroke(0);
  rect(x, baseY + boxSize*2, boxSize, boxSize);
  fill(255); 
  noStroke();
  text("0", x + boxSize/2, baseY + boxSize*2 + boxSize/2);
} else {
  fill(255); 
  stroke(0);
  rect(x, baseY + boxSize*2, boxSize, boxSize);
  fill(0); 
  noStroke();
  text("1", x + boxSize/2, baseY + boxSize*2 + boxSize/2);
}
  }
}

function drawLabelBox(x, y, label, w){
  fill(200);
  stroke(0);
  rect(x, y, w, boxSize);
  fill(0);
  noStroke();
  textAlign(CENTER, CENTER);
  textSize(boxSize/3);
  text(label, x + w/2, y + boxSize/2);
}

function drawTitle(){
  const title = "The Turkish Sieve";
  const y = 100;             
  const x = width / 2;      

  push();
  textAlign(CENTER, TOP);
  textSize(48);              
  textStyle(BOLD);
  noStroke();
  fill(0, 60);               
  text(title, x + 4, y + 6); 
  pop();

  push();
  textAlign(CENTER, TOP);
  textSize(48);
  textStyle(BOLD);

  fill(250, 220, 100);      

  stroke(30, 30, 60);  
  strokeWeight(3);
  text(title, x, y);
  pop();

  push();
  textAlign(CENTER, TOP);
  textSize(14);
  textStyle(NORMAL);
  noStroke();
  fill(200);
  text("© 2025 Algorithm & Animation : Hüseyin Çakanlı", x, y + 50);
  pop();
}

</script>
</body>
</html>
