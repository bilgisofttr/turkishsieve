<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Milestone 3</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
</head>
<body>
<script>
let numbers = [];
let boxSize;
let wheelRadius;
let angle = 0;
let rotating = false; 
let speed = 5; 
let offset = 0;

const wheelUnits = 10; 
const firstTick = 7;   
const secondTick = 10; 

let coloredBoxes = [];

function setup() {
  createCanvas(windowWidth, windowHeight);


  wheelRadius = (height * 0.6) / 2;


  boxSize = (2 * PI * wheelRadius) / wheelUnits * 0.8;


  for (let n = 1; n < 200; n++) {
    numbers.push(6 * n - 1);
    numbers.push(6 * n + 1);
    coloredBoxes.push(false);
  }
}

function draw() {
  background(30);

  drawBoxes();

  // Ã‡ark
  push();
  let wheelY = height - boxSize - 20 - wheelRadius; 
  translate(width / 2, wheelY);

  let startAngle = PI/2; 
  if (rotating) {
    angle += (speed / boxSize) * (TWO_PI / wheelUnits); 
  }
  rotate(startAngle + angle);

  noFill();
  stroke(255);
  strokeWeight(2);
  ellipse(0, 0, wheelRadius * 2);

  strokeWeight(4);
  const tickPositions = [firstTick, secondTick];
  for (let i of tickPositions) {
    let a = 0;
    if (rotating) {
      a = (i-1) * (TWO_PI / wheelUnits); 
    }
    let x = cos(a) * wheelRadius;
    let y = sin(a) * wheelRadius;
    line(x, y, cos(a) * (wheelRadius - 20), sin(a) * (wheelRadius - 20));
  }
  pop();
}

function drawBoxes() {
  let y = height - boxSize - 20;
  offset += speed;

  for (let i = 0; i < numbers.length; i++) {
    let x = width - (offset - i * boxSize);

    if (x < -boxSize) continue;
    if (x > width + boxSize) continue;

    if (!rotating && numbers[i] === 25 && x < width/2 + boxSize/2 && x > width/2 - boxSize/2) {
      rotating = true;
    }

    if (numbers[i] >= 25 && numbers[i] % 5 === 0 && x + boxSize/2 >= width/2 - speed/2 && x + boxSize/2 <= width/2 + speed/2) {
      coloredBoxes[i] = true;
    }

    let fillColor = coloredBoxes[i] ? 100 : 255;
    let textColor = coloredBoxes[i] ? 255 : 0;

    fill(fillColor);
    stroke(0);
    rect(x, y, boxSize, boxSize);

    fill(textColor);
    noStroke();
    textAlign(CENTER, CENTER);
    textSize(boxSize / 3);
    text(numbers[i], x + boxSize / 2, y + boxSize / 2);
  }
}
</script>
</body>
</html>
